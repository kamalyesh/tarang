(this["webpackJsonptarang-example"]=this["webpackJsonptarang-example"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(6);var r=n(0),a=n.n(r),l=n(4),c=n.n(l),o=n(1),u=n(2);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){for(var t=1;e/2>1;)t*=2,e/=2;return t}var d={WIDTH:256,HEIGHT:256,CONTROLS_HEIGHT:30};Object.freeze(d);var m={DEFAULT_DIMENSIONS:d},E=m.DEFAULT_DIMENSIONS,b=u.a.getNextId;var h=m.DEFAULT_DIMENSIONS,g=u.a.getNextId;var f=i({Bar:function(e){var t=e.audioUrl,n=e.coverArtUrl,l=e.width,c=e.height,u=e.controls,d=void 0!==u&&u,m=Object(r.useState)(!1),h=m[0],g=m[1],f=Object(r.useState)(b())[0],v=Object(r.useState)(E),p=v[0],H=v[1],y=Object(r.useState)(!0),O=y[0],T=y[1],I=Object(r.useRef)(new Audio),S=Object(r.useRef)(null),w=Object(r.useRef)(null),j=Object(r.useRef)(null),A=Object(r.useRef)(null);Object(r.useEffect)((function(){T(d)}),[d]),Object(r.useEffect)((function(){k(),isNaN(l)||l==p.WIDTH||H((function(e){return i({},e,{WIDTH:s(l)})}))}),[l]),Object(r.useEffect)((function(){k(),isNaN(c)||c==p.HEIGHT||(c>2*p.CONTROLS_HEIGHT?H((function(e){return i({},e,{HEIGHT:c})})):H((function(e){return i({},e,{HEIGHT:2*p.CONTROLS_HEIGHT})})))}),[c]);var k=function(){A.current&&A.current.selectAll("*").remove()},C=function(e,t,n){if(void 0===t&&(t=p.HEIGHT),void 0===n&&(n=p.WIDTH),j.current.getByteFrequencyData(e),A.current&&e.length){var r=function(){var e=parseInt(.5*p.WIDTH),t=Math.abs(p.HEIGHT-e)/e;return console.log({assumedHeight:e},{ratio:t}),t}();A.current.selectAll("rect").data(e).enter().append("rect").attr("fill",(function(e){return"#000"})).attr("width",n/e.length-1).attr("x",(function(t,r){return r*(n/e.length)})),A.current.selectAll("rect").data(e).attr("y",(function(e,n){return t-e*r})).attr("height",(function(e,t){return e*r}))}};Object(r.useEffect)((function(){if(A.current){var e=n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url("+n+"));":"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))";console.log("changing style",e),A.current.select("#"+f).attr("style",e)}}),[n]);var D=function(){try{g(!0),S.current||(S.current=new(window.AudioContext||window.webkitAudioContext)),w.current?I.current.src=t:w.current=S.current.createMediaElementSource(new Audio(t)),I.current=w.current.mediaElement,I.current.crossOrigin="anonymous",I.current.load(),I.current.play(),I.current.onended=function(e){return k()},j.current=S.current.createAnalyser(),w.current.connect(j.current),w.current.connect(S.current.destination),j.current.fftSize=p.WIDTH;var e=j.current.frequencyBinCount,r=new Uint8Array(e);j.current.getByteFrequencyData(r),function(e,t,r){if(void 0===t&&(t=p.HEIGHT),void 0===r&&(r=p.WIDTH),o){A.current||(A.current=Object(o.select)("#"+f).append("svg").attr("height",t).attr("width",r).attr("class","my-1").attr("style",n?"background: liniear-gradient(to bottom, rgba(117, 118, 124, 0.52), rgba(53, 57, 64, 0.78), url("+n+"));":"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))").attr("id","bar_"+f+"_"+b()));!function t(){try{!I.current||I.current.paused?cancelAnimationFrame(t):(requestAnimationFrame(t),C(e))}catch(n){console.error(n)}}()}else console.warn("d3 is not found. Tarang may not behave as expected.")}(r)}catch(a){console.error(a)}},U=function(){g(!1),I.current.pause(),I.current.currentTime=0,k()},G=function(){O||h||D()},N=function(){O||h&&U()};return a.a.createElement(r.Fragment,null,a.a.createElement("div",{onMouseEnter:G,onFocus:G,onPointerEnter:G,onMouseLeave:N,onBlur:N,onPointerLeave:G,style:{top:0,left:0,width:p.WIDTH,height:O?p.HEIGHT+p.CONTROLS_HEIGHT:p.HEIGHT,position:"relative",backgroundColor:"#eeeeeeaa"}},a.a.createElement("div",{id:f,style:{flex:1,position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"}}),O?a.a.createElement("div",{style:{flex:1,position:"absolute",height:p.CONTROLS_HEIGHT,bottom:0,left:0,right:0}},a.a.createElement("button",{onClick:D},"Play"),a.a.createElement("button",{onClick:U},"Stop")):a.a.createElement(r.Fragment,null)))},Line:function(e){var t=e.audioUrl,n=e.coverArtUrl,l=e.width,c=e.height,u=e.controls,d=void 0!==u&&u,m=Object(r.useState)(!1),E=m[0],b=m[1],f=Object(r.useState)(g())[0],v=Object(r.useState)(h),p=v[0],H=v[1],y=Object(r.useState)(!0),O=y[0],T=y[1],I=Object(r.useRef)(new Audio),S=Object(r.useRef)(null),w=Object(r.useRef)(null),j=Object(r.useRef)(null),A=Object(r.useRef)(null);Object(r.useEffect)((function(){T(d)}),[d]),Object(r.useEffect)((function(){k(),isNaN(l)||l==p.WIDTH||H((function(e){return i({},e,{WIDTH:s(l)})}))}),[l]),Object(r.useEffect)((function(){k(),isNaN(c)||c==p.HEIGHT||(c>2*p.CONTROLS_HEIGHT?H((function(e){return i({},e,{HEIGHT:c})})):H((function(e){return i({},e,{HEIGHT:2*p.CONTROLS_HEIGHT})})))}),[c]);var k=function(){A.current&&A.current.selectAll("*").remove()},C=function(e,t,n){void 0===t&&(t=p.HEIGHT),void 0===n&&(n=p.WIDTH);var r=function(){var e=parseInt(.5*p.WIDTH);return Math.abs(p.HEIGHT-e)/e}();if(j.current.getByteFrequencyData(e),A.current&&e.length){k();var a=Object(o.line)().x((function(t,r){return r*(n/e.length)})).y((function(e){return t-e*r}));A.current.append("path").attr("d",a(e)).attr("stroke","black").attr("fill","none")}};Object(r.useEffect)((function(){A.current&&A.current.select("#"+f).attr("style",n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url("+n+"));":"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))")}),[n]);var D=function(){try{b(!0),S.current||(S.current=new(window.AudioContext||window.webkitAudioContext));var e=new Audio(t);e.crossOrigin="anonymous",w.current?I.current=e:w.current=S.current.createMediaElementSource(e),I.current=w.current.mediaElement,I.current.load(),I.current.play(),I.current.onended=function(e){return k()},j.current=S.current.createAnalyser(),w.current.connect(j.current),w.current.connect(S.current.destination),j.current.fftSize=p.WIDTH;var r=j.current.frequencyBinCount,a=new Uint8Array(r);j.current.getByteFrequencyData(a),function(e,t,r){if(void 0===t&&(t=p.HEIGHT),void 0===r&&(r=p.WIDTH),o){var a=n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url("+n+"));":"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))";A.current||(A.current=Object(o.select)("#"+f).append("svg").attr("height",t).attr("width",r).attr("class","my-1").attr("style",""+a).attr("id","line_"+f+"_"+g()));!function t(){try{!I.current||I.current.paused?cancelAnimationFrame(t):(requestAnimationFrame(t),C(e))}catch(n){console.error(n)}}()}else console.warn("d3 is not found. Tarang may not behave as expected.")}(a)}catch(l){console.error(l)}},U=function(){b(!1),I.current.pause(),I.current.currentTime=0,k()},G=function(){O||E||D()},N=function(){O||E&&U()};return a.a.createElement(r.Fragment,null,a.a.createElement("div",{onMouseEnter:G,onFocus:G,onPointerEnter:G,onMouseLeave:N,onBlur:N,onPointerLeave:G,style:{top:0,left:0,width:p.WIDTH,height:O?p.HEIGHT+p.CONTROLS_HEIGHT:p.HEIGHT,position:"relative",backgroundColor:"#eeeeeeaa"}},a.a.createElement("div",{id:f,style:{flex:1,position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"}}),O?a.a.createElement("div",{style:{flex:1,position:"absolute",height:p.CONTROLS_HEIGHT,bottom:0,left:0,right:0}},a.a.createElement("button",{onClick:D},"Play"),a.a.createElement("button",{onClick:U},"Stop")):a.a.createElement(r.Fragment,null)))},utils:{binaryCeil:function(e){var t=1;do{t*=2,e/=2}while(e/2>0);return t},binaryFloor:s}},m);n(11);var v=()=>{const e=[{audioUrl:"https://tarang.surge.sh/audio/example.mp3",coverArtUrl:"https://tarang.surge.sh/images/example-cover.png"}],[t,n]=Object(r.useState)([...e]),[l,c]=Object(r.useState)(0),[o,u]=Object(r.useState)(""),[i,s]=Object(r.useState)(!0),[d,m]=Object(r.useState)(!0),[E,b]=Object(r.useState)(f.DEFAULT_DIMENSIONS),[h,g]=Object(r.useState)(f.DEFAULT_DIMENSIONS),[v,p]=Object(r.useState)(!1),[H,y]=Object(r.useState)(!1),O=e=>{let t=e.split("/");return t.length?t[t.length-1]:t};return a.a.createElement("div",{className:"App"},a.a.createElement("section",null,a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Playlist"),a.a.createElement("table",{style:{position:"relative",width:"400px",height:"fit-content"}},a.a.createElement("tbody",null,t.map((e,t)=>a.a.createElement("tr",{key:JSON.stringify(e).length+"_"+t,style:{textDecoration:"link",cursor:"pointer"}},a.a.createElement("td",null,a.a.createElement("button",{onClick:()=>{c(t)}},O(e.audioUrl)))))||null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("input",{style:{width:"90%"},type:"url",value:o,onChange:e=>u(e.target.value),placeholder:"Enter mp3 url"})),a.a.createElement("td",null,a.a.createElement("button",{type:"button",onClick:()=>{o&&n(t.concat([{audioUrl:o,coverArtUrl:"#"}]))}},"Set"))),a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("button",{onClick:()=>{n([e[0]]),c(0),u("")}},"Reset")))))))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Now Playing"),a.a.createElement("table",{style:{position:"relative",width:"400px",height:"100px",maxHeight:"300px",overflowY:"scroll"}},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,O(t[l].audioUrl))))))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Line Graph"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"line-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>s(e.target.checked),id:"line-control",checked:i})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"}},v?null:a.a.createElement(f.Line,{width:E.WIDTH,height:E.HEIGHT,controls:i,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl}))))))),a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Bar Graph"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>m(e.target.checked),id:"bar-control",checked:d})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"}},H?null:a.a.createElement(f.Bar,{width:h.WIDTH,height:h.HEIGHT,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl})))))))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Line Graph"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"line-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>s(e.target.checked),id:"line-control",checked:i})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"},title:"height is halved"},v?null:a.a.createElement(f.Line,{width:E.WIDTH,height:100,controls:i,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl}))))))),a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Bar Graph"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>m(e.target.checked),id:"bar-control",checked:d})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"}},H?null:a.a.createElement(f.Bar,{width:h.WIDTH,height:100,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl}))))))))))))};c.a.render(a.a.createElement(v,null),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.3d567f11.chunk.js.map