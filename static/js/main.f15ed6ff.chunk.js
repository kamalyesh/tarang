(this["webpackJsonptarang-example"]=this["webpackJsonptarang-example"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(6);var r=n(0),a=n.n(r),l=n(4),c=n.n(l),o=n(2),i=n(1);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){for(var t=1;e/2>1;)t*=2,e/=2;return t}var E={WIDTH:256,HEIGHT:256,CONTROLS_HEIGHT:30};Object.freeze(E);var m={WIDTH:1,HEIGHT:1};Object.freeze(m);var f={DEFAULT_DIMENSIONS:E,DEFAULT_DIMENSIONS_SCALE:m},p=i.a.getNextId,b=function(){function e(e,t,n){if(void 0===t&&(t=u({},f.DEFAULT_DIMENSIONS)),void 0===n&&(n=1),this.canvasId=e||p(),this.customScale=n,this.scale=u({},f.DEFAULT_DIMENSIONS_SCALE),t&&(this.dimensions=t,this.updateSvgWidthScale(),this.updateSvgHeightScale()),this.graph=null,!o)throw new Error("d3 is not found. Tarang may not behave as expected.");this.d3=o}var t=e.prototype;return t.init=function(){},t.update=function(){},t.clear=function(){this.graph&&this.graph.selectAll("*").remove()},t.updateSvgHeightScale=function(){var e=parseInt(.5*this.dimensions.WIDTH);this.dimensions.HEIGHT-e?this.scale.HEIGHT=Math.abs(this.dimensions.HEIGHT-e)/e*this.customScale:this.scale.HEIGHT=this.customScale,console.log({scale:this.scale})},t.updateSvgWidthScale=function(){var e=h(.5*this.dimensions.WIDTH);this.dimensions.WIDTH-e?this.scale.WIDTH=Math.abs(this.dimensions.WIDTH-e)/e*this.customScale:this.scale.WIDTH=this.customScale,console.log({scale:this.scale})},t.destroy=function(){this.clear(),this.graph.remove(),this.graph=null},e}(),v=f.DEFAULT_DIMENSIONS,g=i.a.getNextId,H=function(e){function t(t,n,r){var a;return void 0===r&&(r=1),(a=e.call(this,t,n,r)||this).BAR_PADDING=1,a}s(t,e);var n=t.prototype;return n.init=function(e){var t=this.canvasId,n=this.dimensions,r=this.d3;this.graph=r.select("#"+t).append("svg").attr("height",n.HEIGHT).attr("width",n.WIDTH).attr("class","my-1").attr("style",e).attr("id","bar_"+t+"_"+g())},n.update=function(e,t){var n=this.BAR_PADDING,r=this.dimensions,a=this.graph,l=this.scale;a.selectAll("rect").data(e).enter().append("rect").attr("fill",(function(e){return"#000"})).attr("width",r.WIDTH/e.length-n).attr("x",(function(t,n){return n*(r.WIDTH*l.WIDTH/e.length)})),a.selectAll("rect").data(e).attr("y",(function(e,t){return r.HEIGHT-e*l.HEIGHT})).attr("height",(function(e,t){return e*l.HEIGHT}))},t}(b);var y=f.DEFAULT_DIMENSIONS,I=i.a.getNextId,T=function(e){function t(t,n,r){return void 0===r&&(r=1),e.call(this,t,n,r)||this}s(t,e);var n=t.prototype;return n.init=function(e){var t=this.canvasId,n=this.dimensions,r=this.d3;this.graph=r.select("#"+t).append("svg").attr("height",n.HEIGHT).attr("width",n.WIDTH).attr("class","my-1").attr("style",""+e).attr("id","line_"+t+"_"+I())},n.update=function(e,t){var n=this.dimensions,r=this.d3,a=this.graph,l=this.scale;this.clear();var c=r.line().x((function(t,r){return r*n.WIDTH*l.WIDTH/e.length})).y((function(e){return n.HEIGHT-e*l.HEIGHT}));a.append("path").attr("d",c(e)).attr("stroke","black").attr("fill","none")},t}(b);var O=u({Bar:function(e){var t,n=e.audioUrl,l=e.coverArtUrl,c=e.width,o=e.height,i=e.controls,s=void 0!==i&&i,d=e.muted,h=void 0!==d&&d,E=e.volume,m=void 0===E?.8:E,f=e.scale,p=void 0===f?1:f,b=e.opacity,y=Object(r.useState)(!1),I=y[0],T=y[1],O=Object(r.useState)(g())[0],S=Object(r.useState)(v),U=S[0],A=S[1],w=Object(r.useState)(!1),D=w[0],G=w[1],N=Object(r.useState)(!0),j=N[0],k=N[1],C=Object(r.useRef)(new Audio),W=Object(r.useRef)(null),x=Object(r.useRef)(null),L=Object(r.useRef)(null),_=Object(r.useRef)(null);Object(r.useEffect)((function(){k(s)}),[s]),Object(r.useEffect)((function(){F(),isNaN(c)||c==U.WIDTH||A((function(e){return u({},e,{WIDTH:c})}))}),[c]),Object(r.useEffect)((function(){F(),isNaN(o)||o==U.HEIGHT||(o>2*U.CONTROLS_HEIGHT?A((function(e){return u({},e,{HEIGHT:o})})):A((function(e){return u({},e,{HEIGHT:2*U.CONTROLS_HEIGHT})})))}),[o]),Object(r.useEffect)((function(){x.current&&W.current&&(D?x.current.disconnect(W.current.destination):x.current.connect(W.current.destination))}),[D]),Object(r.useEffect)((function(){G(h)}),[h]),Object(r.useEffect)((function(){C.current.volume=m}),[m]);var F=function(){_.current&&_.current.clear()},R=function(e){_.current||(_.current=new H(O,U,p),_.current.init());!function t(){try{!C.current||C.current.paused?cancelAnimationFrame(t):(requestAnimationFrame(t),function(e){L.current.getByteFrequencyData(e),_.current&&e.length&&_.current.update(e,b)}(e))}catch(n){console.error(n)}}()},B=function(){try{T(!0),W.current||(W.current=new(window.AudioContext||window.webkitAudioContext));var e=new Audio(n);e.crossOrigin="anonymous",x.current?C.current=e:x.current=W.current.createMediaElementSource(e),C.current=x.current.mediaElement,C.current.volume=m,C.current.load(),C.current.play(),C.current.onended=function(e){return F()},L.current=W.current.createAnalyser(),x.current.connect(L.current),D||x.current.connect(W.current.destination),L.current.fftSize=U.WIDTH;var t=L.current.frequencyBinCount,r=new Uint8Array(t);L.current.getByteFrequencyData(r),R(r)}catch(a){console.error(a)}},M=function(){T(!1),C.current.pause(),C.current.currentTime=0,F()},P=function(){j||I||B()},z=function(){j||I&&M()};return a.a.createElement(r.Fragment,null,a.a.createElement("div",{onMouseEnter:P,onFocus:P,onPointerEnter:P,onMouseLeave:z,onBlur:z,onPointerLeave:P,className:"tarang-bar tarang-container",style:(t={width:U.WIDTH,height:j?U.HEIGHT+U.CONTROLS_HEIGHT:U.HEIGHT*p.HEIGHT,background:"linear-gradient(to bottom, #aaa6, #aaad)"},t.background="linear-gradient(to bottom, #aaa6, #aaad), url("+l+")",t)},a.a.createElement("div",{id:O,style:{flex:1,position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"}}),j?a.a.createElement("div",{style:{flex:1,position:"absolute",height:U.CONTROLS_HEIGHT,bottom:0,left:0,right:0}},a.a.createElement("button",{onClick:B},"Play"),a.a.createElement("button",{onClick:M},"Stop"),a.a.createElement("button",{onClick:function(){G(!D)}},D?"Unmute":"Mute")):a.a.createElement(r.Fragment,null)))},Line:function(e){var t,n=e.audioUrl,l=e.coverArtUrl,c=e.width,o=e.height,i=e.controls,s=void 0!==i&&i,d=e.muted,E=void 0!==d&&d,m=e.volume,f=void 0===m?.8:m,p=e.scale,b=void 0===p?1:p,v=e.opacity,g=Object(r.useState)(!1),H=g[0],O=g[1],S=Object(r.useState)(I())[0],U=Object(r.useState)(y),A=U[0],w=U[1],D=Object(r.useState)(!0),G=D[0],N=D[1],j=Object(r.useState)(!0),k=j[0],C=j[1],W=Object(r.useRef)(new Audio),x=Object(r.useRef)(null),L=Object(r.useRef)(null),_=Object(r.useRef)(null),F=Object(r.useRef)(null);Object(r.useEffect)((function(){N(s)}),[s]),Object(r.useEffect)((function(){R(),isNaN(c)||c==A.WIDTH||w((function(e){return u({},e,{WIDTH:h(c)})}))}),[c]),Object(r.useEffect)((function(){R(),isNaN(o)||o==A.HEIGHT||(o>2*A.CONTROLS_HEIGHT?w((function(e){return u({},e,{HEIGHT:o})})):w((function(e){return u({},e,{HEIGHT:2*A.CONTROLS_HEIGHT})})))}),[o]),Object(r.useEffect)((function(){L.current&&x.current&&(k?L.current.disconnect(x.current.destination):L.current.connect(x.current.destination))}),[k]),Object(r.useEffect)((function(){C(E)}),[E]),Object(r.useEffect)((function(){W.current.volume=f}),[f]);var R=function(){F.current&&F.current.clear()},B=function(e){F.current||(F.current=new T(S,A,b),F.current.init());!function t(){try{!W.current||W.current.paused?cancelAnimationFrame(t):(requestAnimationFrame(t),function(e){_.current.getByteFrequencyData(e),F.current&&e.length&&F.current.update(e,v)}(e))}catch(n){console.error(n)}}()},M=function(){try{O(!0),x.current||(x.current=new(window.AudioContext||window.webkitAudioContext));var e=new Audio(n);e.crossOrigin="anonymous",L.current?W.current=e:L.current=x.current.createMediaElementSource(e),W.current=L.current.mediaElement,W.current.volume=f,W.current.load(),W.current.play(),W.current.onended=function(e){return R()},_.current=x.current.createAnalyser(),L.current.connect(_.current),k||L.current.connect(x.current.destination),_.current.fftSize=A.WIDTH;var t=_.current.frequencyBinCount,r=new Uint8Array(t);_.current.getByteFrequencyData(r),B(r)}catch(a){console.error(a)}},P=function(){O(!1),W.current.pause(),W.current.currentTime=0,R()},z=function(){G||H||M()},J=function(){G||H&&P()};return a.a.createElement(r.Fragment,null,a.a.createElement("div",{onMouseEnter:z,onFocus:z,onPointerEnter:z,onMouseLeave:J,onBlur:J,onPointerLeave:z,className:"tarang-line tarang-container",style:(t={width:A.WIDTH,height:G?A.HEIGHT+A.CONTROLS_HEIGHT:A.HEIGHT*b.HEIGHT,background:"linear-gradient(to bottom, #aaa6, #aaad)"},t.background="linear-gradient(to bottom, #aaa6, #aaad), url("+l+")",t)},a.a.createElement("div",{id:S,style:{flex:1,position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"}}),G?a.a.createElement("div",{style:{flex:1,position:"absolute",height:A.CONTROLS_HEIGHT,bottom:0,left:0,right:0}},a.a.createElement("button",{onClick:M},"Play"),a.a.createElement("button",{onClick:P},"Stop"),a.a.createElement("button",{onClick:function(){C(!k)}},k?"Unmute":"Mute")):a.a.createElement(r.Fragment,null)))},utils:{binaryCeil:function(e){var t=1;do{t*=2,e/=2}while(e/2>0);return t},binaryFloor:h},SvgHandler:b},f);n(11);var S=()=>{const e=[{audioUrl:"https://tarang.surge.sh/audio/example.mp3",coverArtUrl:"https://tarang.surge.sh/images/example-cover.png"}],[t,n]=Object(r.useState)([...e]),[l,c]=Object(r.useState)(0),[o,i]=Object(r.useState)(""),[u,s]=Object(r.useState)(""),[d,h]=Object(r.useState)(!0),[E,m]=Object(r.useState)(!0),[f,p]=Object(r.useState)(O.DEFAULT_DIMENSIONS),[b,v]=Object(r.useState)(O.DEFAULT_DIMENSIONS),[g,H]=Object(r.useState)(!1),[y,I]=Object(r.useState)(!1),T=e=>{let t=e.split("/");return t.length?t[t.length-1]:t};return a.a.createElement("div",{className:"App",style:{backgroundColor:"lightsteelblue"}},a.a.createElement("section",null,a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Playlist"),a.a.createElement("table",{style:{position:"relative",width:"400px",height:"fit-content"}},a.a.createElement("tbody",null,t.map((e,t)=>a.a.createElement("tr",{key:JSON.stringify(e).length+"_"+t,style:{textDecoration:"link",cursor:"pointer"}},a.a.createElement("td",null,a.a.createElement("button",{onClick:()=>{c(t)}},T(e.audioUrl)))))||null,a.a.createElement("tr",null,a.a.createElement("td",{style:{display:"flex",flexWrap:"wrap"}},a.a.createElement("input",{style:{width:"90%",display:"block"},type:"url",value:o,onChange:e=>i(e.target.value),placeholder:"Enter mp3 url"}),a.a.createElement("input",{style:{width:"90%",display:"block"},type:"url",value:u,onChange:e=>s(e.target.value),placeholder:"Enter cover art url"})),a.a.createElement("td",{style:{display:"flex",flexWrap:"wrap"}},a.a.createElement("button",{type:"button",onClick:()=>{o&&n(t.concat([{audioUrl:o,coverArtUrl:u||"#"}]))},style:{display:"block"}},"Set"),a.a.createElement("button",{onClick:()=>{n([e[0]]),c(0),i(""),s("")},style:{display:"block"}},"Reset")))))))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Now Playing"),a.a.createElement("table",{style:{position:"relative",width:"400px",height:"100px",maxHeight:"300px",overflowY:"scroll"}},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,T(t[l].audioUrl))))))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Line Graph"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"line-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>h(e.target.checked),id:"line-control",checked:d})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"},title:JSON.stringify({width:f.WIDTH,height:f.HEIGHT,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:.7},null,4)},g?null:a.a.createElement(O.Line,{width:f.WIDTH,height:f.HEIGHT,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:.7}))))))),a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Bar Graph"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>m(e.target.checked),id:"bar-control",checked:E})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"},title:JSON.stringify({width:b.WIDTH,height:b.HEIGHT,controls:E,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:.7},null,4)},y?null:a.a.createElement(O.Bar,{width:b.WIDTH,height:b.HEIGHT,controls:E,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:.7})))))))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Line Graph (halved)"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"line-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>h(e.target.checked),id:"line-control",checked:d})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"},title:JSON.stringify({width:f.WIDTH,height:f.HEIGHT/2,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:.5},null,4)},g?null:a.a.createElement(O.Line,{width:f.WIDTH,height:f.HEIGHT/2,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:.5}))))))),a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Bar Graph (halved)"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>m(e.target.checked),id:"bar-control",checked:E})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"},title:JSON.stringify({width:b.WIDTH,height:b.HEIGHT/2,controls:E,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:.9},null,4)},y?null:a.a.createElement(O.Bar,{width:b.WIDTH,height:b.HEIGHT/2,controls:E,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:.9})))))))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Line Graph (scaled)"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"line-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>h(e.target.checked),id:"line-control",checked:d})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"},title:JSON.stringify({width:f.WIDTH,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:1.1},null,4)},g?null:a.a.createElement(O.Line,{width:f.WIDTH,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:1.1}))))))),a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Bar Graph (scaled)"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>m(e.target.checked),id:"bar-control",checked:E})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"},title:JSON.stringify({width:b.WIDTH,controls:E,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:1.1},null,4)},y?null:a.a.createElement(O.Bar,{width:b.WIDTH,controls:E,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl,scale:1.1}))))))))))))};c.a.render(a.a.createElement(S,null),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.f15ed6ff.chunk.js.map