(this["webpackJsonptarang-example"]=this["webpackJsonptarang-example"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(6);var r=n(0),a=n.n(r),l=n(4),c=n.n(l),o=n(1),u=n(2);function i(e){let t=1;for(;e/2>1;)t*=2,e/=2;return t}const{getNextId:s}=u.a;const{getNextId:d}=u.a;const m=function(e){let{audioUrl:t,coverArtUrl:n,width:l,height:c,controls:u=!1}=e;const[d,m]=Object(r.useState)(!1),[g,b]=Object(r.useState)(s()),[E,h]=Object(r.useState)({WIDTH:256,HEIGHT:280,CONTROLS_HEIGHT:30}),[f,p]=Object(r.useState)(!0),y=Object(r.useRef)(new Audio),v=Object(r.useRef)(null),H=Object(r.useRef)(null),O=Object(r.useRef)(null),w=Object(r.useRef)(null);Object(r.useEffect)(()=>{p(u)},[u]),Object(r.useEffect)(()=>{isNaN(l)||l==E.WIDTH||(h(e=>({...e,WIDTH:i(l)})),T())},[l]);const T=()=>{w.current&&w.current.selectAll("*").remove()},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.HEIGHT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.WIDTH;O.current.getByteFrequencyData(e),w.current&&e.length&&(w.current.selectAll("rect").data(e).enter().append("rect").attr("fill",(function(e){return"#000"})).attr("width",n/e.length-1).attr("x",(function(t,r){return r*(n/e.length)})),w.current.selectAll("rect").data(e).attr("y",(function(e,n){return t-e})).attr("height",(function(e,t){return e})))};Object(r.useEffect)(()=>{if(w.current){let e=n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url(".concat(n,"));"):"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))";console.log("changing style",e),w.current.select("#"+g).attr("style",e)}},[n]);const j=()=>{try{m(!0),v.current||(v.current=new(window.AudioContext||window.webkitAudioContext)),H.current?y.current.src=t:H.current=v.current.createMediaElementSource(new Audio(t)),y.current=H.current.mediaElement,y.current.crossOrigin="anonymous",y.current.load(),y.current.play(),y.current.onended=e=>T(),O.current=v.current.createAnalyser(),H.current.connect(O.current),H.current.connect(v.current.destination),O.current.fftSize=E.WIDTH;const e=O.current.frequencyBinCount,r=new Uint8Array(e);O.current.getByteFrequencyData(r),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.HEIGHT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.WIDTH;if(o){w.current||(w.current=Object(o.select)("#"+g).append("svg").attr("height",t).attr("width",r).attr("class","my-1").attr("style",n?"background: liniear-gradient(to bottom, rgba(117, 118, 124, 0.52), rgba(53, 57, 64, 0.78), url(".concat(n,"));"):"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))").attr("id","bar_"+g+"_"+s()));const a=()=>{try{!y.current||y.current.paused?cancelAnimationFrame(a):(requestAnimationFrame(a),I(e))}catch(t){console.error(t)}};a()}else console.warn("d3 is not found. Tarang may not behave as expected.")}(r)}catch(e){console.error(e)}},k=()=>{m(!1),y.current.pause(),y.current.currentTime=0,T()},A=()=>{f||d||j()},S=()=>{f||d&&k()};return a.a.createElement(r.Fragment,null,a.a.createElement("div",{onMouseEnter:A,onFocus:A,onPointerEnter:A,onMouseLeave:S,onBlur:S,onPointerLeave:A,style:{top:0,left:0,width:E.WIDTH,height:f?E.HEIGHT+E.CONTROLS_HEIGHT:E.HEIGHT,position:"relative",backgroundColor:"#eeeeeeaa"}},a.a.createElement("div",{id:g,style:{flex:1,position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"}}),f?a.a.createElement("div",{style:{flex:1,position:"absolute",height:E.CONTROLS_HEIGHT,bottom:0,left:0,right:0}},a.a.createElement("button",{onClick:j},"Play"),a.a.createElement("button",{onClick:k},"Stop")):a.a.createElement(r.Fragment,null)))},g=function(e){let{audioUrl:t,coverArtUrl:n,width:l,height:c,controls:u=!1}=e;const[s,m]=Object(r.useState)(!1),[g,b]=Object(r.useState)(d()),[E,h]=Object(r.useState)({WIDTH:256,HEIGHT:280,CONTROLS_HEIGHT:30}),[f,p]=Object(r.useState)(!0),y=Object(r.useRef)(new Audio),v=Object(r.useRef)(null),H=Object(r.useRef)(null),O=Object(r.useRef)(null),w=Object(r.useRef)(null);Object(r.useEffect)(()=>{p(u)},[u]),Object(r.useEffect)(()=>{l!=E.WIDTH&&(h(e=>({...e,WIDTH:i(l)})),T())},[l]);const T=()=>{w.current&&w.current.selectAll("*").remove()},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.HEIGHT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.WIDTH;if(O.current.getByteFrequencyData(e),w.current&&e.length){T();var r=Object(o.line)().x((function(t,r){return r*(n/e.length)})).y((function(e){return t-e}));w.current.append("path").attr("d",r(e)).attr("stroke","black").attr("fill","none")}};Object(r.useEffect)(()=>{w.current&&w.current.select("#"+g).attr("style",n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url(".concat(n,"));"):"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))")},[n]);const j=()=>{try{m(!0),v.current||(v.current=new(window.AudioContext||window.webkitAudioContext));let e=new Audio(t);e.crossOrigin="anonymous",H.current?y.current=e:H.current=v.current.createMediaElementSource(e),y.current=H.current.mediaElement,y.current.load(),y.current.play(),y.current.onended=e=>T(),O.current=v.current.createAnalyser(),H.current.connect(O.current),H.current.connect(v.current.destination),O.current.fftSize=E.WIDTH;const r=O.current.frequencyBinCount,a=new Uint8Array(r);O.current.getByteFrequencyData(a),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.HEIGHT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.WIDTH;if(o){w.current||(w.current=Object(o.select)("#"+g).append("svg").attr("height",t).attr("width",r).attr("class","my-1").attr("style",n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url(".concat(n,"));"):"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))").attr("id","line_"+g+"_"+d()));const a=()=>{try{!y.current||y.current.paused?cancelAnimationFrame(a):(requestAnimationFrame(a),I(e))}catch(t){console.error(t)}};a()}else console.warn("d3 is not found. Tarang may not behave as expected.")}(a)}catch(e){console.error(e)}},k=()=>{m(!1),y.current.pause(),y.current.currentTime=0,T()},A=()=>{f||s||j()},S=()=>{f||s&&k()};return a.a.createElement(r.Fragment,null,a.a.createElement("div",{onMouseEnter:A,onFocus:A,onPointerEnter:A,onMouseLeave:S,onBlur:S,onPointerLeave:A,style:{top:0,left:0,width:E.WIDTH,height:f?E.HEIGHT+E.CONTROLS_HEIGHT:E.HEIGHT,position:"relative",backgroundColor:"#eeeeeeaa"}},a.a.createElement("div",{id:g,style:{flex:1,position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"}}),f?a.a.createElement("div",{style:{flex:1,position:"absolute",height:E.CONTROLS_HEIGHT,bottom:0,left:0,right:0}},a.a.createElement("button",{onClick:j},"Play"),a.a.createElement("button",{onClick:k},"Stop")):a.a.createElement(r.Fragment,null)))};n(11);var b=()=>{const e=[{audioUrl:"https://tarang.surge.sh/audio/example.mp3",coverArtUrl:"https://tarang.surge.sh/images/example-cover.png"}],[t,n]=Object(r.useState)([...e]),[l,c]=Object(r.useState)(0),[o,u]=Object(r.useState)(""),[i,s]=Object(r.useState)(!0),[d,b]=Object(r.useState)(!0),E=e=>{let t=e.split("/");return t.length?t[t.length-1]:t};return a.a.createElement("div",{className:"App"},a.a.createElement("section",null,a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Playlist"),a.a.createElement("table",{style:{position:"relative",width:"400px",height:"fit-content"}},a.a.createElement("tbody",null,t.map((e,t)=>a.a.createElement("tr",{key:JSON.stringify(e).length+"_"+t,style:{textDecoration:"link",cursor:"pointer"}},a.a.createElement("td",null,a.a.createElement("a",{target:"_self",onClick:()=>{c(t)}},E(e.audioUrl)))))||null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("input",{style:{width:"90%"},type:"url",value:o,onChange:e=>u(e.target.value),placeholder:"Enter mp3 url"})),a.a.createElement("td",null,a.a.createElement("button",{type:"button",onClick:()=>{o&&n(t.concat([{audioUrl:o,coverArtUrl:"#"}]))}},"Set"))),a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("button",{onClick:()=>{n([e[0]]),c(0),u("")}},"Reset")))))))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Now Playing"),a.a.createElement("table",{style:{position:"relative",width:"400px",height:"100px",maxHeight:"300px",overflowY:"scroll"}},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,E(t[l].audioUrl))))))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Bar Graph"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"line-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>s(e.target.checked),id:"line-control",checked:i})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"}},a.a.createElement(g,{width:500,controls:i,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl}))))))),a.a.createElement("td",null,a.a.createElement("legend",null,"Virtualization as Line Graph"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",a.a.createElement("input",{type:"checkbox",onChange:e=>b(e.target.checked),id:"bar-control",checked:d})))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("div",{style:{position:"relative"}},a.a.createElement(m,{width:500,controls:d,audioUrl:t[l].audioUrl,coverArtUrl:t[l].coverArtUrl}))))))))))))};c.a.render(a.a.createElement(b,null),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.aba95409.chunk.js.map