(this["webpackJsonptarang-example"]=this["webpackJsonptarang-example"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(6);var r=n(0),l=n.n(r),a=n(4),c=n.n(a),o=n(1),u=n(2);function i(e){let t=1;for(;e/2>1;)t*=2,e/=2;return t}const d={WIDTH:256,HEIGHT:256,CONTROLS_HEIGHT:30};Object.freeze(d);var s={DEFAULT_DIMENSIONS:d};const m=s.DEFAULT_DIMENSIONS,{getNextId:E}=u.a;const h=s.DEFAULT_DIMENSIONS,{getNextId:b}=u.a;const g={Bar:function(e){let{audioUrl:t,coverArtUrl:n,width:a,height:c,controls:u=!1,muted:d=!1,volume:s=.8}=e;const[h,b]=Object(r.useState)(!1),[g,p]=Object(r.useState)(E()),[f,y]=Object(r.useState)(m),[H,v]=Object(r.useState)(!0),O=Object(r.useRef)(new Audio),T=Object(r.useRef)(null),I=Object(r.useRef)(null),S=Object(r.useRef)(null),k=Object(r.useRef)(null);Object(r.useEffect)(()=>{v(u)},[u]),Object(r.useEffect)(()=>{w(),isNaN(a)||a==f.WIDTH||y(e=>({...e,WIDTH:i(a)}))},[a]),Object(r.useEffect)(()=>{w(),isNaN(c)||c==f.HEIGHT||(c>2*f.CONTROLS_HEIGHT?y(e=>({...e,HEIGHT:c})):y(e=>({...e,HEIGHT:2*f.CONTROLS_HEIGHT})))},[c]),Object(r.useEffect)(()=>{I.current&&T.current&&(d?I.current.disconnect(T.current.destination):I.current.connect(T.current.destination))},[d]),Object(r.useEffect)(()=>{O.current.volume=s},[s]);const w=()=>{k.current&&k.current.selectAll("*").remove()},j=()=>{let e=parseInt(.5*f.WIDTH);return Math.abs(f.HEIGHT-e)/e},A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.HEIGHT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.WIDTH;if(S.current.getByteFrequencyData(e),k.current&&e.length){let r=j();k.current.selectAll("rect").data(e).enter().append("rect").attr("fill",(function(e){return"#000"})).attr("width",n/e.length-1).attr("x",(function(t,r){return r*(n/e.length)})),k.current.selectAll("rect").data(e).attr("y",(function(e,n){return t-e*r})).attr("height",(function(e,t){return e*r}))}};Object(r.useEffect)(()=>{if(k.current){let e=n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url(".concat(n,"));"):"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))";console.log("changing style",e),k.current.select("#"+g).attr("style",e)}},[n]);const U=()=>{try{b(!0),T.current||(T.current=new(window.AudioContext||window.webkitAudioContext));let e=new Audio(t);e.crossOrigin="anonymous",I.current?O.current=e:I.current=T.current.createMediaElementSource(e),O.current=I.current.mediaElement,O.current.volume=s,O.current.load(),O.current.play(),O.current.onended=e=>w(),S.current=T.current.createAnalyser(),I.current.connect(S.current),d||I.current.connect(T.current.destination),S.current.fftSize=f.WIDTH;const r=S.current.frequencyBinCount,l=new Uint8Array(r);S.current.getByteFrequencyData(l),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.HEIGHT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.WIDTH;if(o){k.current||(k.current=Object(o.select)("#"+g).append("svg").attr("height",t).attr("width",r).attr("class","my-1").attr("style",n?"background: liniear-gradient(to bottom, rgba(117, 118, 124, 0.52), rgba(53, 57, 64, 0.78), url(".concat(n,"));"):"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))").attr("id","bar_"+g+"_"+E()));const l=()=>{try{!O.current||O.current.paused?cancelAnimationFrame(l):(requestAnimationFrame(l),A(e))}catch(t){console.error(t)}};l()}else console.warn("d3 is not found. Tarang may not behave as expected.")}(l)}catch(e){console.error(e)}},C=()=>{b(!1),O.current.pause(),O.current.currentTime=0,w()},D=()=>{H||h||U()},x=()=>{H||h&&C()};return l.a.createElement(r.Fragment,null,l.a.createElement("div",{onMouseEnter:D,onFocus:D,onPointerEnter:D,onMouseLeave:x,onBlur:x,onPointerLeave:D,style:{top:0,left:0,width:f.WIDTH,height:H?f.HEIGHT+f.CONTROLS_HEIGHT:f.HEIGHT,position:"relative",backgroundColor:"#eeeeeeaa"}},l.a.createElement("div",{id:g,style:{flex:1,position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"}}),H?l.a.createElement("div",{style:{flex:1,position:"absolute",height:f.CONTROLS_HEIGHT,bottom:0,left:0,right:0}},l.a.createElement("button",{onClick:U},"Play"),l.a.createElement("button",{onClick:C},"Stop")):l.a.createElement(r.Fragment,null)))},Line:function(e){let{audioUrl:t,coverArtUrl:n,width:a,height:c,controls:u=!1,muted:d=!1,volume:s=.8}=e;const[m,E]=Object(r.useState)(!1),[g,p]=Object(r.useState)(b()),[f,y]=Object(r.useState)(h),[H,v]=Object(r.useState)(!0),O=Object(r.useRef)(new Audio),T=Object(r.useRef)(null),I=Object(r.useRef)(null),S=Object(r.useRef)(null),k=Object(r.useRef)(null);Object(r.useEffect)(()=>{v(u)},[u]),Object(r.useEffect)(()=>{w(),isNaN(a)||a==f.WIDTH||y(e=>({...e,WIDTH:i(a)}))},[a]),Object(r.useEffect)(()=>{w(),isNaN(c)||c==f.HEIGHT||(c>2*f.CONTROLS_HEIGHT?y(e=>({...e,HEIGHT:c})):y(e=>({...e,HEIGHT:2*f.CONTROLS_HEIGHT})))},[c]),Object(r.useEffect)(()=>{I.current&&T.current&&(d?I.current.disconnect(T.current.destination):I.current.connect(T.current.destination))},[d]),Object(r.useEffect)(()=>{O.current.volume=s},[s]);const w=()=>{k.current&&k.current.selectAll("*").remove()},j=()=>{let e=parseInt(.5*f.WIDTH);return Math.abs(f.HEIGHT-e)/e},A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.HEIGHT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.WIDTH,r=j();if(S.current.getByteFrequencyData(e),k.current&&e.length){w();var l=Object(o.line)().x((function(t,r){return r*(n/e.length)})).y((function(e){return t-e*r}));k.current.append("path").attr("d",l(e)).attr("stroke","black").attr("fill","none")}};Object(r.useEffect)(()=>{k.current&&k.current.select("#"+g).attr("style",n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url(".concat(n,"));"):"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))")},[n]);const U=()=>{try{E(!0),T.current||(T.current=new(window.AudioContext||window.webkitAudioContext));let e=new Audio(t);e.crossOrigin="anonymous",I.current?O.current=e:I.current=T.current.createMediaElementSource(e),O.current=I.current.mediaElement,O.current.volume=s,O.current.load(),O.current.play(),O.current.onended=e=>w(),S.current=T.current.createAnalyser(),I.current.connect(S.current),d||I.current.connect(T.current.destination),S.current.fftSize=f.WIDTH;const r=S.current.frequencyBinCount,l=new Uint8Array(r);S.current.getByteFrequencyData(l),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.HEIGHT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.WIDTH;if(o){let l=n?"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 118, 124, 0.78), url(".concat(n,"));"):"background: liniear-gradient(to bottom, rgba(245, 246, 252, 0.26), rgba(117, 118, 124, 0.39))";k.current||(k.current=Object(o.select)("#"+g).append("svg").attr("height",t).attr("width",r).attr("class","my-1").attr("style","".concat(l)).attr("id","line_"+g+"_"+b()));const a=()=>{try{!O.current||O.current.paused?cancelAnimationFrame(a):(requestAnimationFrame(a),A(e))}catch(t){console.error(t)}};a()}else console.warn("d3 is not found. Tarang may not behave as expected.")}(l)}catch(e){console.error(e)}},C=()=>{E(!1),O.current.pause(),O.current.currentTime=0,w()},D=()=>{H||m||U()},x=()=>{H||m&&C()};return l.a.createElement(r.Fragment,null,l.a.createElement("div",{onMouseEnter:D,onFocus:D,onPointerEnter:D,onMouseLeave:x,onBlur:x,onPointerLeave:D,style:{top:0,left:0,width:f.WIDTH,height:H?f.HEIGHT+f.CONTROLS_HEIGHT:f.HEIGHT,position:"relative",backgroundColor:"#eeeeeeaa"}},l.a.createElement("div",{id:g,style:{flex:1,position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"hidden"}}),H?l.a.createElement("div",{style:{flex:1,position:"absolute",height:f.CONTROLS_HEIGHT,bottom:0,left:0,right:0}},l.a.createElement("button",{onClick:U},"Play"),l.a.createElement("button",{onClick:C},"Stop")):l.a.createElement(r.Fragment,null)))},utils:{binaryCeil:function(e){let t=1;do{t*=2,e/=2}while(e/2>0);return t},binaryFloor:i},...s};n(11);var p=()=>{const e=[{audioUrl:"https://tarang.surge.sh/audio/example.mp3",coverArtUrl:"https://tarang.surge.sh/images/example-cover.png"}],[t,n]=Object(r.useState)([...e]),[a,c]=Object(r.useState)(0),[o,u]=Object(r.useState)(""),[i,d]=Object(r.useState)(!0),[s,m]=Object(r.useState)(!0),[E,h]=Object(r.useState)(!0),[b,p]=Object(r.useState)(!0),[f,y]=Object(r.useState)(g.DEFAULT_DIMENSIONS),[H,v]=Object(r.useState)(g.DEFAULT_DIMENSIONS),[O,T]=Object(r.useState)(!1),[I,S]=Object(r.useState)(!1),k=e=>{let t=e.split("/");return t.length?t[t.length-1]:t};return l.a.createElement("div",{className:"App"},l.a.createElement("section",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("legend",null,"Playlist"),l.a.createElement("table",{style:{position:"relative",width:"400px",height:"fit-content"}},l.a.createElement("tbody",null,t.map((e,t)=>l.a.createElement("tr",{key:JSON.stringify(e).length+"_"+t,style:{textDecoration:"link",cursor:"pointer"}},l.a.createElement("td",null,l.a.createElement("button",{onClick:()=>{c(t)}},k(e.audioUrl)))))||null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{style:{width:"90%"},type:"url",value:o,onChange:e=>u(e.target.value),placeholder:"Enter mp3 url"})),l.a.createElement("td",null,l.a.createElement("button",{type:"button",onClick:()=>{o&&n(t.concat([{audioUrl:o,coverArtUrl:"#"}]))}},"Set"))),l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("button",{onClick:()=>{n([e[0]]),c(0),u("")}},"Reset")))))))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("legend",null,"Now Playing"),l.a.createElement("table",{style:{position:"relative",width:"400px",height:"100px",maxHeight:"300px",overflowY:"scroll"}},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,k(t[a].audioUrl))))))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("legend",null,"Virtualization as Line Graph"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("label",{htmlFor:"line-control"},"Show Controls",l.a.createElement("input",{type:"checkbox",onChange:e=>d(e.target.checked),id:"line-control",checked:i})))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{position:"relative"}},O?null:l.a.createElement(g.Line,{width:f.WIDTH,height:f.HEIGHT,controls:i,audioUrl:t[a].audioUrl,coverArtUrl:t[a].coverArtUrl}))))))),l.a.createElement("td",null,l.a.createElement("legend",null,"Virtualization as Bar Graph"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",l.a.createElement("input",{type:"checkbox",onChange:e=>m(e.target.checked),id:"bar-control",checked:s})))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{position:"relative"}},I?null:l.a.createElement(g.Bar,{width:H.WIDTH,height:H.HEIGHT,controls:s,audioUrl:t[a].audioUrl,coverArtUrl:t[a].coverArtUrl})))))))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("legend",null,"Virtualization as Line Graph"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("label",{htmlFor:"line-control"},"Show Controls",l.a.createElement("input",{type:"checkbox",onChange:e=>d(e.target.checked),id:"line-control",checked:i})))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{position:"relative"},title:"height is halved"},O?null:l.a.createElement(g.Line,{width:f.WIDTH,height:100,controls:i,audioUrl:t[a].audioUrl,coverArtUrl:t[a].coverArtUrl}))))))),l.a.createElement("td",null,l.a.createElement("legend",null,"Virtualization as Bar Graph"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",l.a.createElement("input",{type:"checkbox",onChange:e=>m(e.target.checked),id:"bar-control",checked:s})))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{position:"relative"}},I?null:l.a.createElement(g.Bar,{width:H.WIDTH,height:100,controls:s,audioUrl:t[a].audioUrl,coverArtUrl:t[a].coverArtUrl})))))))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("legend",null,"Virtualization as Line Graph (muted) "),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{style:{display:"flex"}},l.a.createElement("label",{htmlFor:"line-control"},"Show Controls",l.a.createElement("input",{type:"checkbox",onChange:e=>d(e.target.checked),id:"line-control",checked:i})),l.a.createElement("label",{htmlFor:"bar-control"},"Mute Audio",l.a.createElement("input",{type:"checkbox",onChange:e=>h(e.target.checked),id:"line-mute",checked:E})))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{position:"relative"},title:"height is halved"},O?null:l.a.createElement(g.Line,{width:f.WIDTH,height:100,muted:E,controls:i,audioUrl:t[a].audioUrl,coverArtUrl:t[a].coverArtUrl}))))))),l.a.createElement("td",null,l.a.createElement("legend",null,"Virtualization as Bar Graph (muted) "),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{style:{display:"flex"}},l.a.createElement("label",{htmlFor:"bar-control"},"Show Controls",l.a.createElement("input",{type:"checkbox",onChange:e=>m(e.target.checked),id:"bar-control",checked:s})),l.a.createElement("label",{htmlFor:"bar-control"},"Mute Audio",l.a.createElement("input",{type:"checkbox",onChange:e=>p(e.target.checked),id:"bar-mute",checked:b})))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{position:"relative"}},I?null:l.a.createElement(g.Bar,{width:H.WIDTH,height:100,muted:b,controls:s,audioUrl:t[a].audioUrl,coverArtUrl:t[a].coverArtUrl}))))))))))))};c.a.render(l.a.createElement(p,null),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.86dc691d.chunk.js.map