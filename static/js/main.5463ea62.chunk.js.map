{"version":3,"sources":["../../src/lib/utils/binaryFloor.js","../../src/lib/Constants.js","../../src/lib/SvgHandler.js","../../src/lib/components/Bar/BarSvgHandler.js","../../src/lib/components/Bar/Bar.js","../../src/lib/components/Line/LineSvgHandler.js","../../src/lib/components/Line/Line.js","../../src/index.js","../../src/lib/utils/binaryCeil.js","App.js","index.js"],"names":["binaryFloor","number","returnValue","DEFAULT_DIMENSIONS","WIDTH","HEIGHT","CONTROLS_HEIGHT","Object","DEFAULT_DIMENSIONS_SCALE","getNextId","idman","SvgHandler","dimensions","Constants","scale","this","canvasId","Error","d3","init","update","clear","updateSvgHeightScale","assumedHeight","parseInt","Math","console","updateSvgWidthScale","assumedWidth","destroy","BarSvgHandler","BAR_PADDING","graph","d","frequencies","i","initialDimensions","LineSvgHandler","lineFunc","Tarang","Bar","audioUrl","coverArtUrl","width","height","controls","muted","volume","opacity","useState","isPlaying","setIsPlaying","setDimensions","isMute","muteAudio","isControlsVisible","setIsControlsVisible","audioRef","useRef","audioContextRef","audioSrcRef","analyserRef","svgRef","useEffect","clearSvg","isNaN","newDimensions","createSvg","updateFrequencyData","cancelAnimationFrame","requestAnimationFrame","updateSvg","error","play","window","audio","Audio","bufferLength","Uint8Array","stop","focusIn","focusOut","onMouseEnter","onFocus","onPointerEnter","onMouseLeave","onBlur","onPointerLeave","className","concat","barStyle","style","backgroundImage","id","onClick","Line","lineStyle","background","utils","binaryCeil","App","initialSrcArray","srcArray","updateSrcArray","src","updateSrc","newAudioUrl","setNewAudioUrl","newCoverArtUrl","setNewCoverArtUrl","lineControlsVisible","setLineControlsVisible","barControlsVisible","setBarControlsVisible","lineDimensions","setLineDimensions","barDimensions","setBarDimensions","lineVisualizationUpdating","setLineVisualizationUpdating","barVisualizationUpdating","setBarVisualizationUpdating","getFileName","url","split","length","backgroundColor","position","map","srcItem","srcIndex","key","JSON","stringify","display","flexWrap","type","value","onChange","e","target","placeholder","maxHeight","overflowY","htmlFor","checked","title","float","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5463ea62.chunk.js","sourcesContent":["function binaryFloor(number) {\n    let returnValue = 1\n    while (number / 2 > 1) {\n        returnValue = returnValue * 2;\n        number = number / 2;\n    }\n    // console.log('returnValue', returnValue)\n    return returnValue;\n}\n\nexport default binaryFloor;\n","const DEFAULT_DIMENSIONS = { WIDTH: 256, HEIGHT: 256, CONTROLS_HEIGHT: 30 }\nObject.freeze(DEFAULT_DIMENSIONS)\n\nconst DEFAULT_DIMENSIONS_SCALE = { WIDTH: 1, HEIGHT: 1 }\nObject.freeze(DEFAULT_DIMENSIONS_SCALE)\n\nexport default {\n    DEFAULT_DIMENSIONS, DEFAULT_DIMENSIONS_SCALE\n}","import * as d3 from 'd3'\nimport idman from 'idman';\nconst { getNextId } = idman;\nimport Constants from './Constants';\nimport binaryFloor from './utils/binaryFloor';\n\nexport class SvgHandler {\n    constructor(canvasId, dimensions = { ...Constants.DEFAULT_DIMENSIONS }, scale = 1) {\n        if (canvasId) this.canvasId = canvasId\n        else this.canvasId = getNextId()\n        this.customScale = scale\n        this.scale = { ...Constants.DEFAULT_DIMENSIONS_SCALE }\n        if (dimensions) {\n            this.dimensions = dimensions\n            this.updateSvgWidthScale()\n            this.updateSvgHeightScale()\n        }\n        this.graph = null;\n        if (!d3) throw new Error(\"d3 is not found. Tarang may not behave as expected.\")\n        else this.d3 = d3\n    }\n    init() {\n    }\n    update() {\n    }\n    clear() {\n        if (this.graph) {\n            this.graph.selectAll(\"*\").remove()\n        }\n    }\n    updateSvgHeightScale() {\n        let assumedHeight = parseInt(this.dimensions.WIDTH * 0.5)\n        if (this.dimensions.HEIGHT - assumedHeight) this.scale.HEIGHT = Math.abs(this.dimensions.HEIGHT - assumedHeight) / assumedHeight * this.customScale\n        else this.scale.HEIGHT = this.customScale\n        console.log({ scale: this.scale })\n    }\n    updateSvgWidthScale() {\n        let assumedWidth = binaryFloor(this.dimensions.WIDTH * 0.5)\n        if (this.dimensions.WIDTH - assumedWidth) this.scale.WIDTH = Math.abs(this.dimensions.WIDTH - assumedWidth) / assumedWidth * this.customScale\n        else this.scale.WIDTH = this.customScale\n        console.log({ scale: this.scale })\n    }\n    destroy() {\n        this.clear()\n        this.graph.remove();\n        this.graph = null;\n    }\n}","import { SvgHandler } from \"../../SvgHandler\";\nimport idman from 'idman';\nconst { getNextId } = idman;\n\nexport class BarSvgHandler extends SvgHandler {\n    constructor(canvasId, dimensions, scale = 1) {\n        super(canvasId, dimensions, scale)\n        this.BAR_PADDING = 1\n    }\n    init(style) {\n        const { canvasId, customScale, dimensions, d3 } = this\n        this.graph = d3.select('#' + canvasId)\n            .append('svg')\n            .attr('height', dimensions.HEIGHT)\n            .attr('width', dimensions.WIDTH)\n            .attr('class', 'my-1')\n            .attr('style', style)\n            .attr('id', \"bar_\" + canvasId + \"_\" + getNextId());\n    }\n    update(frequencies, opacity = 1) {\n        const { BAR_PADDING, dimensions, graph, scale } = this\n        graph.selectAll('rect')\n            .data(frequencies)\n            .enter()\n            .append('rect')\n            // .attr('fill-opacity', function (d) {\n            //     return opacity\n            // })\n            .attr('fill', function (d) {\n                return \"#000\"\n            })\n            .attr('width', dimensions.WIDTH / frequencies.length - BAR_PADDING)\n            .attr('x', function (d, i) {\n                return i * ((dimensions.WIDTH * scale.WIDTH) / frequencies.length);\n                // return i * (dimensions.WIDTH / frequencies.length);\n            })\n        graph.selectAll('rect')\n            .data(frequencies)\n            .attr('y', function (d, i) {\n                return dimensions.HEIGHT - (d * scale.HEIGHT)\n            })\n            .attr('height', function (d, i) {\n                return (d * scale.HEIGHT)\n            });\n    }\n}\n","import React, { useEffect, useRef, useState, Fragment } from \"react\";\r\nimport Constants from \"../../Constants\";\r\nconst initialDimensions = Constants.DEFAULT_DIMENSIONS\r\nimport idman from 'idman';\r\nimport { BarSvgHandler } from \"./BarSvgHandler\";\r\nconst { getNextId } = idman;\r\nimport barStyle from \"./Bar.module.css\"\r\n\r\nexport default function Bar({ audioUrl, coverArtUrl, width, height, controls = false, muted = false, volume = 0.8, scale = 1, opacity }) {\r\n    // TODO: add state loaded. to check that the user has interacted with the page. so that the autoplay functionality can also be added in future\r\n    const [isPlaying, setIsPlaying] = useState(false)\r\n    const [canvasId, setCanvasId] = useState(getNextId())\r\n    const [dimensions, setDimensions] = useState(initialDimensions)\r\n    const [isMute, muteAudio] = useState(false)\r\n    const [isControlsVisible, setIsControlsVisible] = useState(true)\r\n    const audioRef = useRef(new Audio())\r\n    const audioContextRef = useRef(null)\r\n    const audioSrcRef = useRef(null);\r\n    const analyserRef = useRef(null);\r\n    const svgRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        setIsControlsVisible(controls)\r\n    }, [controls])\r\n\r\n    useEffect(() => {\r\n        clearSvg()\r\n        if (!isNaN(width) && width != dimensions.WIDTH) {\r\n            setDimensions(newDimensions => {\r\n                return {\r\n                    ...newDimensions,\r\n                    // WIDTH: binaryFloor(width)\r\n                    WIDTH: width\r\n                }\r\n            });\r\n        }\r\n    }, [width])\r\n\r\n\r\n    useEffect(() => {\r\n        clearSvg()\r\n        if (!isNaN(height) && height != dimensions.HEIGHT) {\r\n            if (controls) {\r\n                if (height > dimensions.CONTROLS_HEIGHT * 2) {\r\n                    setDimensions(newDimensions => {\r\n                        return {\r\n                            ...newDimensions,\r\n                            HEIGHT: height\r\n                        }\r\n                    });\r\n                } else {\r\n                    setDimensions(newDimensions => {\r\n                        return {\r\n                            ...newDimensions,\r\n                            HEIGHT: dimensions.CONTROLS_HEIGHT * 2\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                setDimensions(newDimensions => {\r\n                    return {\r\n                        ...newDimensions,\r\n                        HEIGHT: height\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }, [height, controls])\r\n\r\n    useEffect(() => {\r\n        if (audioSrcRef.current && audioContextRef.current) {\r\n            if (!isMute) audioSrcRef.current.connect(audioContextRef.current.destination);\r\n            else audioSrcRef.current.disconnect(audioContextRef.current.destination);\r\n        }\r\n    }, [isMute])\r\n\r\n    useEffect(() => {\r\n        muteAudio(muted)\r\n    }, [muted])\r\n\r\n    useEffect(() => {\r\n        audioRef.current.volume = volume\r\n    }, [volume])\r\n\r\n    const clearSvg = () => {\r\n        if (svgRef.current) svgRef.current.clear()\r\n        // console.log(\"clearing svg\")\r\n    }\r\n\r\n    // const getSvgHeight = () => {\r\n    //     let ratio = getSvgHeightScale()\r\n    //     let newHeight = dimensions.HEIGHT * ratio\r\n    //     console.log({newHeight}, {dimensions})\r\n    //     return newHeight        \r\n    // }\r\n\r\n    const updateSvg = (frequencies) => {\r\n        analyserRef.current.getByteFrequencyData(frequencies);\r\n        if (svgRef.current && frequencies.length) {\r\n            svgRef.current.update(frequencies, opacity)\r\n        }\r\n    }\r\n\r\n    const createSvg = (frequencies) => {\r\n        // console.log(\"creating visualization graph \", { d3 })\r\n        if (!svgRef.current) {\r\n            svgRef.current = new BarSvgHandler(canvasId, dimensions, scale)\r\n            svgRef.current.init()\r\n        }\r\n\r\n        const updateFrequencyData = () => {\r\n            try {\r\n                if (!audioRef.current || audioRef.current.paused) {\r\n                    cancelAnimationFrame(updateFrequencyData)\r\n                    // return;\r\n                } else {\r\n                    requestAnimationFrame(updateFrequencyData)\r\n                    updateSvg(frequencies)\r\n                }\r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        }\r\n        updateFrequencyData()\r\n\r\n    }\r\n\r\n    // useEffect(updateSvg, [frequencyData])\r\n    const play = () => {\r\n        try {\r\n            setIsPlaying(true)\r\n            if (!audioContextRef.current) audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)()\r\n            let audio = new Audio(audioUrl)\r\n            audio.crossOrigin = \"anonymous\"\r\n\r\n            if (!audioSrcRef.current) audioSrcRef.current = audioContextRef.current.createMediaElementSource(audio)\r\n            else audioRef.current = audio\r\n            audioRef.current = audioSrcRef.current.mediaElement\r\n\r\n            audioRef.current.volume = volume\r\n            audioRef.current.load()\r\n            audioRef.current.play()\r\n            audioRef.current.onended = (event) => clearSvg()\r\n            analyserRef.current = audioContextRef.current.createAnalyser()\r\n\r\n            audioSrcRef.current.connect(analyserRef.current);\r\n            if (!isMute) audioSrcRef.current.connect(audioContextRef.current.destination);\r\n\r\n            analyserRef.current.fftSize = dimensions.WIDTH;\r\n            const bufferLength = analyserRef.current.frequencyBinCount;\r\n            const frequencies = new Uint8Array(bufferLength);\r\n            analyserRef.current.getByteFrequencyData(frequencies);\r\n            // console.log({ frequencies })\r\n            createSvg(frequencies)\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    const stop = () => {\r\n        setIsPlaying(false)\r\n        audioRef.current.pause()\r\n        audioRef.current.currentTime = 0\r\n        clearSvg()\r\n    }\r\n\r\n    const toggleMute = () => {\r\n        muteAudio(!isMute)\r\n    }\r\n\r\n    const focusIn = () => {\r\n        if (!isControlsVisible) {\r\n            if (!isPlaying) {\r\n                play()\r\n            }\r\n        }\r\n    }\r\n\r\n    const focusOut = () => {\r\n        if (!isControlsVisible) {\r\n            if (isPlaying) {\r\n                stop()\r\n            }\r\n        }\r\n    }\r\n\r\n    const toggleFocus = () => {\r\n        if (isPlaying) focusOut()\r\n        else focusIn()\r\n    }\r\n\r\n    return <>\r\n        <div\r\n            onMouseEnter={focusIn}\r\n            onFocus={focusIn}\r\n            onPointerEnter={focusIn}\r\n\r\n            // onTouch={toggleFocus}\r\n            // onClick={toggleFocus}\r\n\r\n            onMouseLeave={focusOut}\r\n            onBlur={focusOut}\r\n            onPointerLeave={focusIn}\r\n\r\n            className={\" \".concat(barStyle.tarangContainer, \" \", \"tarang-bar\")}\r\n            style={{\r\n                width: (dimensions.WIDTH),\r\n                height: isControlsVisible ? ((dimensions.HEIGHT) + dimensions.CONTROLS_HEIGHT) : dimensions.HEIGHT,\r\n                backgroundImage: `linear-gradient(to bottom, #aaa6, #aaad), url(${coverArtUrl})`,\r\n            }}>\r\n            <div className={barStyle.tarangSvgContainer} id={canvasId} style={{\r\n                width: dimensions.WIDTH,\r\n                height: dimensions.HEIGHT\r\n            }}>\r\n            </div>\r\n            {isControlsVisible ? <div className={barStyle.tarangContorlsContainer} style={{ height: dimensions.CONTROLS_HEIGHT }}>\r\n                <button className={\" \".concat(barStyle.tarangControls, \" \", barStyle.tarangControlPlay)} onClick={play}>Play</button>\r\n                <button className={\" \".concat(barStyle.tarangControls, \" \", barStyle.tarangControlStop)} onClick={stop}>Stop</button>\r\n                <button className={\" \".concat(barStyle.tarangControls, \" \", barStyle.tarangControlMute)} onClick={toggleMute}>{isMute ? \"Unmute\" : \"Mute\"}</button>\r\n            </div> : null}\r\n        </div>\r\n    </>\r\n}","import { SvgHandler } from \"../../SvgHandler\";\nimport idman from 'idman';\nconst { getNextId } = idman;\n\nexport class LineSvgHandler extends SvgHandler {\n    constructor(canvasId, dimensions, scale = 1) {\n        super(canvasId, dimensions, scale)\n    }\n    init(background) {\n        const { canvasId, customScale, dimensions, d3 } = this\n        this.graph = d3.select('#' + canvasId)\n            .append('svg')\n            .attr('height', dimensions.HEIGHT)\n            .attr('width', dimensions.WIDTH)\n            .attr('class', 'my-1')\n            .attr('style', `${background}`)\n            .attr('id', \"line_\" + canvasId + \"_\" + getNextId());\n    }\n    update(frequencies, opacity) {\n        const { dimensions, d3, graph, scale } = this\n        this.clear()\n        var lineFunc = d3.line()\n            .x(function (d, i) {\n                // return i * dimensions.WIDTH / frequencies.length;\n                return i * dimensions.WIDTH * scale.WIDTH / frequencies.length;\n            })\n            .y(function (d) {\n                return dimensions.HEIGHT - (d * scale.HEIGHT);\n            })\n        graph.append('path')\n            .attr('d', lineFunc(frequencies))\n            .attr('stroke', 'black')\n            // .attr('fill-opacity', opacity)\n            .attr('fill', 'none')\n    }\n}","import React, { useEffect, useRef, useState, Fragment } from \"react\";\r\nimport Constants from \"../../Constants\";\r\nconst initialDimensions = Constants.DEFAULT_DIMENSIONS\r\nimport idman from 'idman';\r\nconst { getNextId } = idman;\r\nimport { LineSvgHandler } from \"./LineSvgHandler\";\r\nimport lineStyle from \"./Line.module.css\"\r\n\r\nexport default function Line({ audioUrl, coverArtUrl, width, height, controls = false, muted = false, volume = 0.8, scale = 1, opacity }) {\r\n    // TODO: add state loaded. to check that the user has interacted with the page. so that the autoplay functionality can also be added in future\r\n    const [isPlaying, setIsPlaying] = useState(false)\r\n    const [canvasId, setCanvasId] = useState(getNextId())\r\n    const [dimensions, setDimensions] = useState(initialDimensions)\r\n    const [isControlsVisible, setIsControlsVisible] = useState(true)\r\n    const [isMute, muteAudio] = useState(true)\r\n    const audioRef = useRef(new Audio())\r\n    const audioContextRef = useRef(null)\r\n    const audioSrcRef = useRef(null);\r\n    const analyserRef = useRef(null);\r\n    const svgRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        setIsControlsVisible(controls)\r\n    }, [controls])\r\n\r\n    useEffect(() => {\r\n        clearSvg()\r\n        if (!isNaN(width) && width != dimensions.WIDTH) {\r\n            setDimensions(newDimensions => {\r\n                return {\r\n                    ...newDimensions,\r\n                    // WIDTH: binaryFloor(width)\r\n                    WIDTH: width\r\n                }\r\n            });\r\n        }\r\n    }, [width])\r\n\r\n    useEffect(() => {\r\n        clearSvg()\r\n        if (!isNaN(height) && height != dimensions.HEIGHT) {\r\n            if (controls) {\r\n                if (height > dimensions.CONTROLS_HEIGHT * 2) {\r\n                    setDimensions(newDimensions => {\r\n                        return {\r\n                            ...newDimensions,\r\n                            HEIGHT: height\r\n                        }\r\n                    });\r\n                } else {\r\n                    setDimensions(newDimensions => {\r\n                        return {\r\n                            ...newDimensions,\r\n                            HEIGHT: dimensions.CONTROLS_HEIGHT * 2\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                setDimensions(newDimensions => {\r\n                    return {\r\n                        ...newDimensions,\r\n                        HEIGHT: height\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }, [height, controls])\r\n\r\n    useEffect(() => {\r\n        if (audioSrcRef.current && audioContextRef.current) {\r\n            if (!isMute) audioSrcRef.current.connect(audioContextRef.current.destination);\r\n            else audioSrcRef.current.disconnect(audioContextRef.current.destination);\r\n        }\r\n    }, [isMute])\r\n\r\n    useEffect(() => {\r\n        muteAudio(muted)\r\n    }, [muted])\r\n\r\n    useEffect(() => {\r\n        audioRef.current.volume = volume\r\n    }, [volume])\r\n\r\n    const clearSvg = () => {\r\n        if (svgRef.current) svgRef.current.clear()\r\n        // console.log(\"clearing svg\")\r\n    }\r\n\r\n    // const getSvgHeight = () => {\r\n    //     let ratio = getSvgHeightScale()\r\n    //     let newHeight = dimensions.HEIGHT * ratio\r\n    //     console.log({newHeight}, {dimensions})\r\n    //     return newHeight        \r\n    // }\r\n\r\n\r\n    const updateSvg = (frequencies) => {\r\n        analyserRef.current.getByteFrequencyData(frequencies);\r\n        if (svgRef.current && frequencies.length) {\r\n            svgRef.current.update(frequencies, opacity)\r\n        }\r\n    }\r\n\r\n    const createSvg = (frequencies) => {\r\n        // console.log(\"creating visualization graph \", { d3 })\r\n        if (!svgRef.current) {\r\n            svgRef.current = new LineSvgHandler(canvasId, dimensions, scale)\r\n            svgRef.current.init()\r\n        }\r\n\r\n        const updateFrequencyData = () => {\r\n            try {\r\n                if (!audioRef.current || audioRef.current.paused) {\r\n                    cancelAnimationFrame(updateFrequencyData)\r\n                    // return;\r\n                } else {\r\n                    requestAnimationFrame(updateFrequencyData)\r\n                    updateSvg(frequencies)\r\n                }\r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        }\r\n        updateFrequencyData()\r\n    }\r\n\r\n    // useEffect(updateSvg, [frequencyData])\r\n    const play = () => {\r\n        try {\r\n            setIsPlaying(true)\r\n            if (!audioContextRef.current) audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)()\r\n            let audio = new Audio(audioUrl)\r\n            audio.crossOrigin = \"anonymous\"\r\n\r\n            if (!audioSrcRef.current) audioSrcRef.current = audioContextRef.current.createMediaElementSource(audio)\r\n            else audioRef.current = audio\r\n\r\n            audioRef.current = audioSrcRef.current.mediaElement\r\n\r\n            audioRef.current.volume = volume\r\n            audioRef.current.load()\r\n            audioRef.current.play()\r\n            audioRef.current.onended = (event) => clearSvg()\r\n            analyserRef.current = audioContextRef.current.createAnalyser()\r\n\r\n            audioSrcRef.current.connect(analyserRef.current);\r\n            if (!isMute) audioSrcRef.current.connect(audioContextRef.current.destination);\r\n\r\n            analyserRef.current.fftSize = dimensions.WIDTH;\r\n            const bufferLength = analyserRef.current.frequencyBinCount;\r\n            const frequencies = new Uint8Array(bufferLength);\r\n            analyserRef.current.getByteFrequencyData(frequencies);\r\n            // console.log({ frequencies })\r\n            createSvg(frequencies)\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    const stop = () => {\r\n        setIsPlaying(false)\r\n        audioRef.current.pause()\r\n        audioRef.current.currentTime = 0\r\n        clearSvg()\r\n    }\r\n\r\n    const toggleMute = () => {\r\n        muteAudio(!isMute)\r\n    }\r\n\r\n    const focusIn = () => {\r\n        if (!isControlsVisible) {\r\n            if (!isPlaying) {\r\n                play()\r\n            }\r\n        }\r\n    }\r\n\r\n    const focusOut = () => {\r\n        if (!isControlsVisible) {\r\n            if (isPlaying) {\r\n                stop()\r\n            }\r\n        }\r\n    }\r\n\r\n    const toggleFocus = () => {\r\n        if (isPlaying) focusOut()\r\n        else focusIn()\r\n    }\r\n\r\n    return <>\r\n        <div\r\n            onMouseEnter={focusIn}\r\n            onFocus={focusIn}\r\n            onPointerEnter={focusIn}\r\n\r\n            // onTouch={toggleFocus}\r\n            // onClick={toggleFocus}\r\n\r\n            onMouseLeave={focusOut}\r\n            onBlur={focusOut}\r\n            onPointerLeave={focusIn}\r\n\r\n            className={\" \".concat(lineStyle.tarangContainer, \" \", \"tarang-line\")}\r\n            style={{\r\n                width: dimensions.WIDTH,\r\n                height: isControlsVisible ? ((dimensions.HEIGHT) + dimensions.CONTROLS_HEIGHT) : dimensions.HEIGHT,\r\n                background: `linear-gradient(to bottom, #aaa6, #aaad), url(${coverArtUrl})`,\r\n            }}>\r\n            <div className={lineStyle.tarangSvgContainer} id={canvasId} style={{\r\n                width: dimensions.WIDTH,\r\n                height: dimensions.HEIGHT,\r\n            }}>\r\n            </div>\r\n            {isControlsVisible ? <div className={lineStyle.tarangContorlsContainer} style={{ height: dimensions.CONTROLS_HEIGHT }}>\r\n                <button className={\" \".concat(lineStyle.tarangControls, \" \", lineStyle.tarangControlPlay)} onClick={play}>Play</button>\r\n                <button className={\" \".concat(lineStyle.tarangControls, \" \", lineStyle.tarangControlStop)} onClick={stop}>Stop</button>\r\n                <button className={\" \".concat(lineStyle.tarangControls, \" \", lineStyle.tarangControlMute)} onClick={toggleMute}>{isMute ? \"Unmute\" : \"Mute\"}</button>\r\n            </div> : null}\r\n        </div>\r\n    </>\r\n}","import binaryCeil from \"./lib/utils/binaryCeil\"\nimport binaryFloor from \"./lib/utils/binaryFloor\"\nimport constants from \"./lib/Constants\"\nimport { SvgHandler } from \"./lib/SvgHandler\"\nimport Bar from \"./lib/components/Bar/Bar\"\nimport Line from \"./lib/components/Line/Line\"\n\nexport const Tarang = {\n  Bar,\n  Line,\n  utils: {\n    binaryCeil,\n    binaryFloor\n  },\n  SvgHandler,\n  ...constants\n}\n","function binaryCeil(number) {\n    let returnValue = 1\n    do {\n        returnValue = returnValue * 2;\n        number = number / 2;\n    } while (number / 2 > 0)\n    return returnValue;\n}\n\nexport default binaryCeil;","import React, { useState } from 'react'\n\n\nimport { Tarang } from 'tarang'\nimport 'tarang/dist/index.css'\n\nconst App = () => {\n  const initialSrcArray = [\n    {\n      audioUrl: \"https://tarang.surge.sh/audio/example.mp3\",\n      coverArtUrl: \"https://tarang.surge.sh/images/example-cover.png\"\n      // audioUrl: \"http://192.168.1.23:8080/audio/example.mp3\",\n      // coverArtUrl: \"http://192.168.1.23:8080/images/example-cover.png\"\n    }\n  ]\n\n  const DEFAULT_SRC = 0\n  const [srcArray, updateSrcArray] = useState([...initialSrcArray])\n  const [src, updateSrc] = useState(DEFAULT_SRC)\n  const [newAudioUrl, setNewAudioUrl] = useState('')\n  const [newCoverArtUrl, setNewCoverArtUrl] = useState('')\n  const [lineControlsVisible, setLineControlsVisible] = useState(true)\n  const [barControlsVisible, setBarControlsVisible] = useState(true)\n  // const [lineDimensionsFormValues, setLineDimensionsFormValues] = useState(Tarang.DEFAULT_DIMENSIONS)\n  // const [barDimensionsFormValues, setBarDimensionsFormValues] = useState(Tarang.DEFAULT_DIMENSIONS)\n  const [lineDimensions, setLineDimensions] = useState(Tarang.DEFAULT_DIMENSIONS)\n  const [barDimensions, setBarDimensions] = useState(Tarang.DEFAULT_DIMENSIONS)\n  const [lineVisualizationUpdating, setLineVisualizationUpdating] = useState(false)\n  const [barVisualizationUpdating, setBarVisualizationUpdating] = useState(false)\n\n  const reset = () => { updateSrcArray([initialSrcArray[0]]); updateSrc(DEFAULT_SRC); setNewAudioUrl(''); setNewCoverArtUrl(''); }\n  const setSrc = (index) => { updateSrc(index) }\n  const updateNewAudio = () => {\n    if (newAudioUrl) {\n      updateSrcArray(srcArray.concat([{ audioUrl: newAudioUrl, coverArtUrl: newCoverArtUrl || \"#\" }]))\n    }\n  }\n\n  const getFileName = (url) => {\n    let src = url.split(\"/\");\n    return src.length ? src[src.length - 1] : src;\n  }\n\n  // const updateLineVisualization = () => {\n  //   setLineVisualizationUpdating(true)\n  //   setLineDimensions(lineDimensionsFormValues)\n  //   setTimeout(() => {\n  //     setLineVisualizationUpdating(false)\n  //   }, [100])\n  // }\n\n  // const updateBarVisualization = () => {\n  //   setBarVisualizationUpdating(true)\n  //   setBarDimensions(barDimensionsFormValues)\n  //   setTimeout(() => {\n  //     setBarVisualizationUpdating(false)\n  //   }, [100])\n  // }\n\n  return (\n    <div className=\"App\" style={{ backgroundColor: 'lightsteelblue' }}>\n      <section>\n        <table>\n          <thead>\n            <tr>\n              <td>\n                <legend>Playlist</legend>\n                <table style={{ position: 'relative', width: \"400px\", height: \"fit-content\" }}>\n                  <tbody>\n                    {\n                      srcArray.map((srcItem, srcIndex) => <tr key={JSON.stringify(srcItem).length + \"_\" + srcIndex} style={{ \"textDecoration\": \"link\", \"cursor\": \"pointer\" }}>\n                        <td>\n                          <button onClick={() => setSrc(srcIndex)}>{getFileName(srcItem.audioUrl)}</button>\n                        </td>\n                      </tr>) || null\n                    }\n                    <tr>\n                      <td style={{ display: \"flex\", flexWrap: \"wrap\" }}>\n                        <input style={{ width: \"90%\", display: \"block\" }} type=\"url\" value={newAudioUrl} onChange={(e) => setNewAudioUrl(e.target.value)} placeholder=\"Enter mp3 url\" />\n                        <input style={{ width: \"90%\", display: \"block\" }} type=\"url\" value={newCoverArtUrl} onChange={(e) => setNewCoverArtUrl(e.target.value)} placeholder=\"Enter cover art url\" />\n                      </td>\n                      <td style={{ display: \"flex\", flexWrap: \"wrap\" }}>\n                        <button type=\"button\" onClick={updateNewAudio} style={{ display: \"block\" }}>Set</button>\n                        <button onClick={reset} style={{ display: \"block\" }}>Reset</button>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </td>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <legend>Now Playing</legend>\n                <table style={{ position: 'relative', width: \"400px\", height: \"100px\", maxHeight: \"300px\", overflowY: \"scroll\" }}>\n                  <tbody>\n                    <tr>\n                      <th>\n                        {getFileName(srcArray[src].audioUrl)}\n                      </th>\n                    </tr>\n                  </tbody>\n                </table>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <legend>Virtualization as Line Graph</legend>\n                <table>\n                  <tbody>\n                    <tr>\n                      <td>\n                        <label htmlFor=\"line-control\">Show Controls\n                          <input type=\"checkbox\" onChange={(e) => setLineControlsVisible(e.target.checked)} id=\"line-control\" checked={lineControlsVisible} />\n                        </label>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>\n                        <div \n                          title={JSON.stringify({\n                            width: lineDimensions.WIDTH,\n                            height: lineDimensions.HEIGHT,\n                            controls: lineControlsVisible,\n                            audioUrl: srcArray[src].audioUrl,\n                            coverArtUrl: srcArray[src].coverArtUrl,\n                            scale: 0.7,\n                          }, null, 4)}>\n                          {\n                            lineVisualizationUpdating ?\n                              null :\n                              <Tarang.Line\n                                width={lineDimensions.WIDTH}\n                                height={lineDimensions.HEIGHT}\n                                controls={lineControlsVisible}\n                                audioUrl={srcArray[src].audioUrl}\n                                coverArtUrl={srcArray[src].coverArtUrl}\n                                scale={0.7}\n                              />\n                          }\n                        </div>\n                      </td>\n                    </tr>\n                    {/* <tr>\n                      <td>\n                        <div style={{ position: 'relative', display: \"flex\" }}>\n                          <input title=\"width of line type visualization\" type=\"number\" value={lineDimensionsFormValues.WIDTH} onChange={(e) => setLineDimensionsFormValues(dim => { return { ...dim, WIDTH: e.target.value } })} />\n                          <input title=\"height of line type visualization\" type=\"number\" value={lineDimensionsFormValues.HEIGHT} onChange={(e) => setLineDimensionsFormValues(dim => { return { ...dim, HEIGHT: e.target.value } })} />\n                          <input type=\"button\" onClick={updateLineVisualization} value=\"Set\" />\n                        </div>\n                      </td>\n                    </tr> */}\n                  </tbody>\n                </table>\n              </td>\n              <td>\n                <legend>Virtualization as Bar Graph</legend>\n                <table>\n                  <tbody>\n                    <tr>\n                      <td>\n                        <label htmlFor=\"bar-control\">Show Controls\n                          <input type=\"checkbox\" onChange={(e) => setBarControlsVisible(e.target.checked)} id=\"bar-control\" checked={barControlsVisible} />\n                        </label>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>\n                        <div \n                          title={JSON.stringify({\n                            width: barDimensions.WIDTH,\n                            height: barDimensions.HEIGHT,\n                            controls: barControlsVisible,\n                            audioUrl: srcArray[src].audioUrl,\n                            coverArtUrl: srcArray[src].coverArtUrl,\n                            scale: 0.7,\n                          }, null, 4)}>\n                          {\n                            barVisualizationUpdating ?\n                              null :\n                              <Tarang.Bar\n                                width={barDimensions.WIDTH}\n                                height={barDimensions.HEIGHT}\n                                controls={barControlsVisible}\n                                audioUrl={srcArray[src].audioUrl}\n                                coverArtUrl={srcArray[src].coverArtUrl}\n                                scale={0.7}\n                              />\n                          }\n                        </div>\n                      </td>\n                    </tr>\n                    {/* <tr>\n                      <td>\n                        <div style={{ position: 'relative', display: \"flex\" }}>\n                          <input title=\"width of bar type visualization\" type=\"number\" value={barDimensionsFormValues.WIDTH} onChange={(e) => setBarDimensionsFormValues(dim => { return { ...dim, WIDTH: e.target.value } })} />\n                          <input title=\"height of bar type visualization\" type=\"number\" value={barDimensionsFormValues.HEIGHT} onChange={(e) => setBarDimensionsFormValues(dim => { return { ...dim, HEIGHT: e.target.value } })} />\n                          <input type=\"button\" onClick={updateBarVisualization} value=\"Set\" />\n                        </div>\n                      </td>\n                    </tr> */}\n                  </tbody>\n                </table>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <legend>Virtualization as Line Graph (halved)</legend>\n                <table>\n                  <tbody>\n                    <tr>\n                      <td>\n                        <label htmlFor=\"line-control\">Show Controls\n                          <input type=\"checkbox\" onChange={(e) => setLineControlsVisible(e.target.checked)} id=\"line-control\" checked={lineControlsVisible} />\n                        </label>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>\n                        <div \n                        style={{float: \"right\"}}\n                         title={\n                          JSON.stringify({\n                            width: lineDimensions.WIDTH,\n                            height: lineDimensions.HEIGHT / 2,\n                            controls: lineControlsVisible,\n                            audioUrl: srcArray[src].audioUrl,\n                            coverArtUrl: srcArray[src].coverArtUrl,\n                            scale: 0.5,\n                          }, null, 4)}>\n                          {\n                            lineVisualizationUpdating ?\n                              null :\n                              <Tarang.Line\n                                width={lineDimensions.WIDTH}\n                                height={lineDimensions.HEIGHT / 2}\n                                controls={lineControlsVisible}\n                                audioUrl={srcArray[src].audioUrl}\n                                coverArtUrl={srcArray[src].coverArtUrl}\n                                scale={0.5}\n                              />\n                          }\n                        </div>\n                      </td>\n                    </tr>\n                    {/* <tr>\n                      <td>\n                        <div style={{ position: 'relative', display: \"flex\" }}>\n                          <input title=\"width of line type visualization\" type=\"number\" value={lineDimensionsFormValues.WIDTH} onChange={(e) => setLineDimensionsFormValues(dim => { return { ...dim, WIDTH: e.target.value } })} />\n                          <input title=\"height of line type visualization\" type=\"number\" value={lineDimensionsFormValues.HEIGHT} onChange={(e) => setLineDimensionsFormValues(dim => { return { ...dim, HEIGHT: e.target.value } })} />\n                          <input type=\"button\" onClick={updateLineVisualization} value=\"Set\" />\n                        </div>\n                      </td>\n                    </tr> */}\n                  </tbody>\n                </table>\n              </td>\n              <td>\n                <legend>Virtualization as Bar Graph (halved)</legend>\n                <table>\n                  <tbody>\n                    <tr>\n                      <td>\n                        <label htmlFor=\"bar-control\">Show Controls\n                          <input type=\"checkbox\" onChange={(e) => setBarControlsVisible(e.target.checked)} id=\"bar-control\" checked={barControlsVisible} />\n                        </label>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>\n                        <div  title={JSON.stringify({\n                          width: barDimensions.WIDTH,\n                          height: barDimensions.HEIGHT / 2,\n                          controls: barControlsVisible,\n                          audioUrl: srcArray[src].audioUrl,\n                          coverArtUrl: srcArray[src].coverArtUrl,\n                          scale: 0.5\n                        }, null, 4)}>\n                          {\n                            barVisualizationUpdating ?\n                              null :\n                              <Tarang.Bar\n                                width={barDimensions.WIDTH}\n                                height={barDimensions.HEIGHT / 2}\n                                controls={barControlsVisible}\n                                audioUrl={srcArray[src].audioUrl}\n                                coverArtUrl={srcArray[src].coverArtUrl}\n                                scale={0.5}\n                              />\n                          }\n                        </div>\n                      </td>\n                    </tr>\n                    {/* <tr>\n                      <td>\n                        <div style={{ position: 'relative', display: \"flex\" }}>\n                          <input title=\"width of bar type visualization\" type=\"number\" value={barDimensionsFormValues.WIDTH} onChange={(e) => setBarDimensionsFormValues(dim => { return { ...dim, WIDTH: e.target.value } })} />\n                          <input title=\"height of bar type visualization\" type=\"number\" value={barDimensionsFormValues.HEIGHT} onChange={(e) => setBarDimensionsFormValues(dim => { return { ...dim, HEIGHT: e.target.value } })} />\n                          <input type=\"button\" onClick={updateBarVisualization} value=\"Set\" />\n                        </div>\n                      </td>\n                    </tr> */}\n                  </tbody>\n                </table>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <legend>Virtualization as Line Graph (scaled)</legend>\n                <table>\n                  <tbody>\n                    <tr>\n                      <td>\n                        <label htmlFor=\"line-control\">Show Controls\n                          <input type=\"checkbox\" onChange={(e) => setLineControlsVisible(e.target.checked)} id=\"line-control\" checked={lineControlsVisible} />\n                        </label>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>\n                        <div\n                          \n                          title={JSON.stringify({\n                            width: lineDimensions.WIDTH,\n                            controls: lineControlsVisible,\n                            audioUrl: srcArray[src].audioUrl,\n                            coverArtUrl: srcArray[src].coverArtUrl,\n                            scale: 1.1,\n                          }, null, 4)}>\n                          {\n                            lineVisualizationUpdating ?\n                              null :\n                              <Tarang.Line\n                                width={lineDimensions.WIDTH}\n                                controls={lineControlsVisible}\n                                audioUrl={srcArray[src].audioUrl}\n                                coverArtUrl={srcArray[src].coverArtUrl}\n                                scale={1.1}\n                              />\n                          }\n                        </div>\n                      </td>\n                    </tr>\n                    {/* <tr>\n                      <td>\n                        <div style={{ position: 'relative', display: \"flex\" }}>\n                          <input title=\"width of line type visualization\" type=\"number\" value={lineDimensionsFormValues.WIDTH} onChange={(e) => setLineDimensionsFormValues(dim => { return { ...dim, WIDTH: e.target.value } })} />\n                          <input title=\"height of line type visualization\" type=\"number\" value={lineDimensionsFormValues.HEIGHT} onChange={(e) => setLineDimensionsFormValues(dim => { return { ...dim, HEIGHT: e.target.value } })} />\n                          <input type=\"button\" onClick={updateLineVisualization} value=\"Set\" />\n                        </div>\n                      </td>\n                    </tr> */}\n                  </tbody>\n                </table>\n              </td>\n              <td>\n                <legend>Virtualization as Bar Graph (scaled)</legend>\n                <table>\n                  <tbody>\n                    <tr>\n                      <td>\n                        <label htmlFor=\"bar-control\">Show Controls\n                          <input type=\"checkbox\" onChange={(e) => setBarControlsVisible(e.target.checked)} id=\"bar-control\" checked={barControlsVisible} />\n                        </label>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>\n                        <div\n                          \n                          title={JSON.stringify({\n                            width: barDimensions.WIDTH,\n                            controls: barControlsVisible,\n                            audioUrl: srcArray[src].audioUrl,\n                            coverArtUrl: srcArray[src].coverArtUrl,\n                            scale: 1.1,\n                          }, null, 4)}>\n                          {\n                            barVisualizationUpdating ?\n                              null :\n                              <Tarang.Bar\n                                width={barDimensions.WIDTH}\n                                controls={barControlsVisible}\n                                audioUrl={srcArray[src].audioUrl}\n                                coverArtUrl={srcArray[src].coverArtUrl}\n                                scale={1.1}\n                              />\n                          }\n                        </div>\n                      </td>\n                    </tr>\n                    {/* <tr>\n                      <td>\n                        <div style={{ position: 'relative', display: \"flex\" }}>\n                          <input title=\"width of bar type visualization\" type=\"number\" value={barDimensionsFormValues.WIDTH} onChange={(e) => setBarDimensionsFormValues(dim => { return { ...dim, WIDTH: e.target.value } })} />\n                          <input title=\"height of bar type visualization\" type=\"number\" value={barDimensionsFormValues.HEIGHT} onChange={(e) => setBarDimensionsFormValues(dim => { return { ...dim, HEIGHT: e.target.value } })} />\n                          <input type=\"button\" onClick={updateBarVisualization} value=\"Set\" />\n                        </div>\n                      </td>\n                    </tr> */}\n                  </tbody>\n                </table>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </section>\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}